<div class="dashboard-panel">
    <h2>ğŸ“Š Cuadro de Mando</h2>

    <div *ngIf="loading$ | async" class="loading-container">
        <div class="spinner"></div>
        <p>Calculando estadÃ­sticas...</p>
    </div>

    <div class="dashboard-container" *ngIf="(stats$ | async) as stats">

        <div class="kpi-grid">
            <div class="card card-blue total-alumnos-card">
                <h3>ğŸ‘¨â€ğŸ“ Alumnos</h3>
                <p class="numero">{{ stats.TotalAlumnos }}</p>
            </div>
            <div class="card card-green">
                <h3>ğŸ“š Asignaturas</h3>
                <p class="numero">{{ stats.TotalAsignaturas }}</p>
            </div>
            <div class="card card-orange edad-media-card">
                <h3>ğŸ‚ Edad Media</h3>
                <p class="numero">{{ stats.EdadMediaGlobal }}</p>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-card">
                <h3>âœ… Aprobados vs âŒ Suspensos</h3>
                <div class="chart-wrapper">
                    <ngx-charts-advanced-pie-chart [scheme]="colorSchemeNotas" [results]="stats.AprobadosVsSuspensos">
                    </ngx-charts-advanced-pie-chart>
                </div>
            </div>

            <div class="chart-card">
                <h3>â­ Nota Media por Asignatura</h3>
                <div class="chart-wrapper">
                    <ngx-charts-bar-horizontal [scheme]="colorScheme" [results]="stats.MediaPorAsignatura"
                        [gradient]="false" [xAxis]="true" [yAxis]="true" [showXAxisLabel]="true" [showYAxisLabel]="true"
                        xAxisLabel="Nota Media" yAxisLabel="Asignatura">
                    </ngx-charts-bar-horizontal>
                </div>
            </div>
        </div>
    </div>
</div>